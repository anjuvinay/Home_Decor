<!DOCTYPE HTML>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Home Decor</title>
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:title" content="">
    <meta property="og:type" content="">
    <meta property="og:url" content="">
    <meta property="og:image" content="">
    <!-- Favicon -->
    <link rel="shortcut icon" type="image/x-icon" href="/assetsb/imgs/theme/favicon.svg">
    <!-- Template CSS -->
    <link href="/assets/css/styles1.css" rel="stylesheet" type="text/css" />
    <style>
        body {
            background-color: rgb(236, 239, 236);
            overflow-x: hidden;
        }
        .main-content {
            margin-left: 18%;
            padding: 40px;
            margin-top: 6%;
        }

        .container-fluid {
            padding-left: 40px;
            padding-right: 40px;
        }
        .center-text {
            text-align: center;
            margin-bottom: 7rem;
        }
        .table-container {
            padding-left: 20px;
            padding-right: 20px;
        }
    </style>
</head>

<body>
   
    <%- include('header') %>
    <%- include('leftnav') %>

    <div class="main-content">
        <h1 class="center-text">Category</h1>

        <section>
            <div class="col-md-9">
            <div class="container-fluid table-container">
                <table class="table mt-5" id="categoryTable">
                    <thead>
                        <tr>
                            <th scope="col">Index</th>
                            <th scope="col">Name</th>
                            <th scope="col">status</th>
                            <th scope="col">action</th>
                            <th scope="col">option</th>
                          
                        </tr>
                    </thead>
                    <tbody>
                        <% category.forEach((cat, index)=> { %>
                            <tr>
                                 
                                <td><%= index+1 %></td>
                                <td><%= cat.name %></td>
                                
                                <% if (cat.is_active) { %>
                                    <td><span class="badge rounded-pill alert-success">Active</span></td>
                                <% } else { %>
                                    <td><span class="badge rounded-pill alert-danger">Blocked</span></td>
                                <% } %>

                                <td class="text-end">
                                    <% if (cat.is_active) { %>
                                        <a onclick="sweet('<%= cat._id %>')" class="btn btn-sm btn-brand rounded font-sm mt-15 bg-danger">Block</a>
                                    <% } else { %>
                                        <a onclick="sweetAlert('<%= cat._id %>')" class="btn btn-sm btn-brand rounded font-sm mt-15 bg-success">Unblock</a>
                                    <% } %>
                                </td>
                               <td> <a class="dropdown-item text-danger" href="/admin/editCategory?id=<%=cat._id%>">Edit</a></td>

                            </tr>
                        <% } )%>
                    </tbody>
                </table>
            </div>
        </div> 
        </section>
        </div>
              
        


            <div class="card ml-auto" >
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-3">
                            <form action="/admin/category" method="post" onsubmit="return validateForm()">
                                <div class="mb-4">
                                    <label for="product_name" class="form-label">Name</label>
                                    <input type="text" placeholder="Type here" class="form-control" id="product_name" name="categoryName" required />
                                    <% if(locals.message){ %>
                                        <span class="text-danger"><%= message %></span>
                                    <% } %>
                                </div>
                                <script>
                                    // Define a JavaScript function called validateForm
                                    function validateForm() {
                                        // Get the input element
                                        var inputElement = document.getElementById('product_name');
                            
                                        // Remove leading and trailing spaces
                                        var trimmedValue = inputElement.value.trim();
                            
                                        // Check if the trimmed value is empty
                                        if (trimmedValue === '') {
                                            // Show an error message or handle the validation as needed
                                            alert('Category name cannot be empty.');
                                            return false; // Prevent form submission
                                        }
                            
                                        // Convert the trimmed input value to uppercase
                                        inputElement.value = trimmedValue.toUpperCase();
                            
                                        // Continue with form submission
                                        return true;
                                    }
                                </script>
                            
                                <div class="d-grid">
                                    <input type="submit" class="btn btn-primary" value="Create category" />
                                </div>
                            </form>
                            
                        </div>   
                    </div> <!-- .row // -->
                </div> <!-- card body .// -->
            </div> <!-- card .// -->
    



    <script>
        $(function() {
            $('#categoryTable').DataTable();
        });
    </script> 
      <!-- jQuery -->
       <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
      <!-- Bootstrap JS (optional, for Bootstrap styling) -->
      <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
      <!-- DataTables JS -->
      <script src="https://cdn.datatables.net/1.10.21/js/jquery.dataTables.min.js"></script>

      
      <script src="/assetsb/js/vendors/jquery-3.6.0.min.js"></script>
      <script src="/assetsb/js/vendors/bootstrap.bundle.min.js"></script>
      <script src="/assetsb/js/vendors/select2.min.js"></script>
      <script src="/assetsb/js/vendors/perfect-scrollbar.js"></script>
      <script src="/assetsb/js/vendors/jquery.fullscreen.min.js"></script>
      <!-- Main Script -->
      <script src="/assetsb/js/main.js" type="text/javascript"></script>
</body>
</html>

